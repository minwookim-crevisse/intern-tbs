# TBS 테스트 웹앱 PRD (Product Requirements Document)

## 1. 제품 개요

### 1.1 제품 비전 및 미션
인턴 후보자의 업무 역량을 평가하기 위한 시나리오 기반 테스트 플랫폼으로, 실무와 유사한 환경에서 문제 해결 능력과 데이터 분석 역량을 객관적으로 평가한다.

### 1.2 프로젝트 배경 및 목적
- **배경**: 인턴 채용 시 실무 역량을 효과적으로 평가할 수 있는 표준화된 테스트 도구 필요
- **목적**:
  - 후보자가 제한된 시간 내에 2문제를 풀고 제출할 수 있는 웹 기반 테스트 환경 제공
  - 관리자가 후보자의 성적과 취약점을 진단할 수 있는 채점 시스템 구축
  - 서버 없이 로컬 환경에서 즉시 실행 가능한 단일 파일 형태의 경량화된 솔루션 제공

### 1.3 성공 지표 (KPIs)
- **시스템 안정성**: 제출 후 재열람 차단율 100% (새로고침/뒤로가기/직접 접근 모두 차단)
- **보안성**: 후보자 화면에 정답/해설/채점기준 노출 건수 0건
- **사용성**: 관리자의 평균 채점 소요 시간 문제당 5분 이내
- **실행 편의성**: 로컬 실행 성공률 100% (별도 서버 설정 불필요)

### 1.4 범위 및 제약 조건
- **기술 범위**: 단일 HTML 파일 (index_pdf.html), JavaScript, localStorage 기반
- **기능 범위**: 로그인, 문제 풀이, 제출, 관리자 채점 기능만 포함
- **제약 조건**:
  - 서버 없이 동작 (백엔드 API 없음)
  - localStorage를 활용한 데이터 관리
  - OpenRouter API는 관리자 채점 시에만 사용
  - 참고자료는 직접 다운로드/링크 노출 최소화 (모달 방식)

---

## 2. 사용자 요구사항

### 2.1 타겟 사용자 페르소나

#### 페르소나 1: 후보자 (Candidate)
- **역할**: 인턴 지원자
- **목표**: 주어진 문제를 정확하게 이해하고 제한 시간 내에 답안 작성 및 제출
- **니즈**:
  - 문제 내용과 참고자료를 명확하게 확인
  - 답안 작성 중 중간 저장 가능
  - 제출 후 실수로 답안이 노출되지 않도록 보호
- **기술 수준**: 기본적인 웹 브라우저 사용 능력

#### 페르소나 2: 관리자 (Admin)
- **역할**: 인사담당자 또는 평가자
- **목표**: 후보자의 답안을 효율적으로 채점하고 역량 평가
- **니즈**:
  - 모든 후보자의 제출 현황 한눈에 확인
  - AI 기반 자동 채점 보조 기능
  - 후보자별 취약점 진단 및 성적 요약
- **기술 수준**: 중급 이상의 웹 애플리케이션 사용 능력

### 2.2 사용자 시나리오 및 유스케이스

#### UC-01: 후보자 로그인 및 문제 확인
1. 후보자가 브라우저에서 index_pdf.html 파일을 실행
2. 계정ID와 비밀번호를 입력하여 로그인
3. 문제 목록 화면에서 2개의 문제 확인 (문제1, 문제2)
4. 각 문제의 제목과 진행 상태 (미제출/제출완료) 표시

#### UC-02: 문제 풀이 및 참고자료 열람
1. 문제 목록에서 특정 문제 선택
2. 문제 내용 화면에 문제 지문 표시
3. "참고자료 보기" 버튼 클릭 시 모달 팝업으로 참고자료 표시
4. 답안 입력란에 텍스트 또는 파일 업로드 형태로 답안 작성
5. "임시 저장" 버튼으로 중간 저장 (localStorage에 저장)

#### UC-03: 답안 제출 및 잠금
1. 답안 작성 완료 후 "제출하기" 버튼 클릭
2. "제출 시 다시 볼 수 없습니다" 경고 모달 표시
3. 최종 확인 후 제출
4. localStorage에 제출 상태 (isSubmitted: true) 저장
5. "제출 완료" 화면으로 자동 이동
6. 이후 해당 문제 접근 시 문제/참고자료/답안 모두 렌더링 차단, "제출 완료" 메시지만 표시

#### UC-04: 관리자 채점 및 취약점 진단
1. 관리자가 admin 계정으로 로그인
2. 관리자 대시보드 진입
3. 후보자 목록에서 특정 후보자 선택
4. 후보자의 제출된 답안 확인
5. "AI 채점" 버튼 클릭 시 OpenRouter API 호출하여 자동 채점
6. 채점 결과 (점수, 취약점 태그) 확인 및 수동 조정
7. 최종 성적 저장

### 2.3 사용자 여정 맵

```
[후보자 여정]
로그인 → 문제 목록 → 문제 선택 → 참고자료 확인 → 답안 작성 → 임시 저장 (반복) → 최종 제출 → 제출 완료

[관리자 여정]
로그인 → Admin 대시보드 → 후보자 선택 → 답안 확인 → AI 채점 → 결과 검토 및 조정 → 성적 저장
```

---

## 3. 기능 명세

### 3.1 핵심 기능 목록 (우선순위)

| 우선순위 | 기능 ID | 기능 명 | 설명 |
|---------|---------|---------|------|
| Must | F-01 | 로그인 시스템 | 계정ID/비밀번호 기반 인증, 권한별 화면 분기 |
| Must | F-02 | 문제 목록 화면 | 후보자에게 2개 문제 목록 표시, 제출 상태 표시 |
| Must | F-03 | 문제 풀이 화면 | 문제 지문, 답안 입력란, 임시 저장/제출 버튼 |
| Must | F-04 | 참고자료 모달 | 참고자료를 모달 형태로 표시 (직접 링크 노출 최소화) |
| Must | F-05 | 제출 잠금 메커니즘 | 제출 후 문제/답안/참고자료 렌더링 차단 |
| Must | F-06 | Admin 대시보드 | 후보자별 성적/취약점 요약 화면 |
| Must | F-07 | AI 기반 채점 | OpenRouter API 연동 자동 채점 |
| Should | F-08 | 임시 저장 기능 | 답안 작성 중 자동/수동 저장 |
| Could | F-09 | 제출 시간 기록 | 문제별 제출 시각 저장 |
| Could | F-10 | 채점 기준 표시 (Admin) | 관리자 화면에만 채점 기준 표시 |

### 3.2 상세 기능 요구사항

#### F-01: 로그인 시스템
- **설명**: 계정정보.xlsx 기반 사용자 인증
- **입력**: 계정ID (String), 비밀번호 (String)
- **출력**: 인증 성공 시 권한별 메인 화면 이동
- **수용 기준**:
  - 계정ID와 비밀번호가 일치하는 경우에만 로그인 성공
  - 권한이 "일반"인 경우 후보자 화면으로 이동
  - 권한이 "관리자"인 경우 Admin 대시보드로 이동
  - 인증 실패 시 "아이디 또는 비밀번호가 일치하지 않습니다" 메시지 표시
  - localStorage에 현재 로그인 사용자 정보 저장 (sessionId 형태)

#### F-02: 문제 목록 화면 (후보자)
- **설명**: 총 2개의 문제 목록을 카드 형태로 표시
- **표시 정보**: 문제 번호, 제목, 제출 상태 (미제출/제출완료)
- **수용 기준**:
  - 문제 1번: "SaaS 서비스 사용료 정산 오류 검수"
  - 문제 2번: "미디어 사업 사용료 정산서 작성"
  - 제출 완료된 문제는 "제출 완료" 배지 표시
  - 미제출 문제는 "답안 작성하기" 버튼 표시
  - 제출 완료 문제 클릭 시 "제출 완료" 메시지만 표시 (문제 내용 차단)

#### F-03: 문제 풀이 화면
- **설명**: 문제 지문, 참고자료 버튼, 답안 입력란, 제출 버튼 구성
- **구성 요소**:
  - 문제 지문 영역: [문제]문항.txt 내용 표시
  - 참고자료 버튼: 클릭 시 모달 팝업 (F-04)
  - 답안 입력란:
    - 문제 1-1: 텍스트 입력 (자유 서술형)
    - 문제 1-2, 2-1: Excel 파일 업로드 (Base64 인코딩 저장)
  - 임시 저장 버튼: localStorage에 답안 저장
  - 제출하기 버튼: 최종 제출 (F-05 트리거)
- **수용 기준**:
  - 답안 입력란은 문제 유형에 따라 동적 렌더링
  - 임시 저장 시 "저장되었습니다" 토스트 메시지
  - 제출 전 "제출 후 다시 볼 수 없습니다" 경고 모달
  - 제출 완료 문제는 본 화면 접근 차단

#### F-04: 참고자료 모달
- **설명**: 문제별 참고자료를 모달 팝업으로 표시
- **참고자료 목록**:
  - 문제 1번: 참고자료 #1~#4 (txt, xlsx 파일)
  - 문제 2번: 참고자료 #1~#4 (txt, xlsx 파일)
- **수용 기준**:
  - 모달 창에서 참고자료 목록 탭 형태로 표시
  - txt 파일은 텍스트로 직접 렌더링
  - xlsx 파일은 HTML 테이블로 변환하여 표시 (SheetJS 라이브러리 활용)
  - 다운로드 버튼 미제공 (복사 방지를 위해 모달 내에서만 열람)
  - 모달 외부 클릭 시 닫기

#### F-05: 제출 잠금 메커니즘 (DoD)
- **설명**: 제출 완료 시 해당 문제의 모든 콘텐츠 접근 차단
- **수용 기준**:
  - 제출 즉시 localStorage에 `submissions[userId][problemId].isSubmitted = true` 저장
  - 제출 완료 후 다음 접근 시도 시:
    - 문제 지문 렌더링 차단
    - 참고자료 버튼 비활성화
    - 답안 입력란 렌더링 차단
    - "제출 완료" 메시지만 화면에 표시
  - 새로고침, 뒤로가기, URL 직접 입력 모두 차단
  - 브라우저 개발자도구로 localStorage 수정 시에도 서버 검증 없이 클라이언트 검증만 수행 (보안 한계 인지)

#### F-06: Admin 대시보드
- **설명**: 관리자가 모든 후보자의 제출 현황과 성적을 확인
- **표시 정보**:
  - 후보자 목록 (계정ID, 이름, 제출 상태, 평균 점수)
  - 후보자 선택 시 상세 화면: 문제별 답안, 채점 결과, 취약점 태그
- **수용 기준**:
  - 권한이 "일반"인 사용자는 Admin 대시보드 접근 차단
  - 후보자별 제출 완료 문제 수 표시 (예: 2/2)
  - 미채점 답안은 "채점 대기" 상태 표시
  - 채점 완료 답안은 점수와 취약점 태그 표시

#### F-07: AI 기반 채점
- **설명**: OpenRouter API를 활용한 자동 채점 보조 기능
- **API 정보**:
  - 모델: tngtech/deepseek-r1t2-chimera:free
  - 입력: 문제 지문, 정답 예시, 후보자 답안
  - 출력: 점수 (0-100), 취약점 태그 (예: "계산 오류", "논리 비약")
- **수용 기준**:
  - "AI 채점" 버튼 클릭 시 API 호출
  - 채점 중 로딩 스피너 표시
  - 채점 결과를 관리자가 수동으로 조정 가능
  - API 호출 실패 시 "수동 채점으로 전환하세요" 안내 메시지
  - 후보자 화면에서는 절대 API 호출 불가 (API 키 노출 방지)

#### F-08: 임시 저장 기능
- **설명**: 답안 작성 중 자동/수동 저장
- **수용 기준**:
  - "임시 저장" 버튼 클릭 시 즉시 localStorage에 저장
  - 30초마다 자동 저장 (백그라운드)
  - 저장 성공 시 "저장되었습니다" 토스트 메시지 (3초 후 자동 사라짐)

---

## 4. 데이터 모델

### 4.1 계정 정보 (Accounts)
```javascript
{
  id: "jahyun",           // 계정ID (String, Primary Key)
  password: "pass1",      // 비밀번호 (String)
  role: "candidate",      // 권한 (candidate | admin)
  name: "홍자현"          // 이름 (String)
}
```
- **초기 데이터 소스**: 계정정보.xlsx
- **매핑 규칙**:
  - 권한 "일반" → role: "candidate"
  - 권한 "관리자" → role: "admin"

### 4.2 문제 데이터 (Problems)
```javascript
{
  id: 1,                         // 문제 ID (Number)
  title: "SaaS 서비스 사용료 정산 오류 검수",  // 제목
  content: "...",                // 문제 지문 (HTML String)
  references: [                  // 참고자료 배열
    {
      id: 1,
      title: "참고자료 #1",
      type: "txt",               // txt | xlsx
      content: "..."             // 파일 내용 (txt는 텍스트, xlsx는 Base64)
    }
  ],
  answerType: "text",            // 답안 유형 (text | file)
  correctAnswer: "...",          // 정답 (Admin용, 후보자 화면에서 절대 노출 금지)
  gradingCriteria: "..."         // 채점 기준 (Admin용)
}
```

### 4.3 답안 데이터 (Submissions)
```javascript
{
  userId: "jahyun",              // 후보자 계정ID
  problemId: 1,                  // 문제 ID
  answer: "...",                 // 답안 내용 (텍스트 또는 Base64 인코딩 파일)
  submittedAt: "2026-02-01T14:30:00",  // 제출 시각 (ISO 8601)
  isSubmitted: true,             // 제출 완료 여부 (Boolean)
  lastSavedAt: "2026-02-01T14:25:00"   // 마지막 임시 저장 시각
}
```
- **localStorage 키**: `submissions_${userId}`
- **구조**: `{ "1": {...}, "2": {...} }`

### 4.4 채점 결과 (GradingResults)
```javascript
{
  userId: "jahyun",
  problemId: 1,
  score: 85,                     // 점수 (0-100)
  weaknessTags: [                // 취약점 태그 배열
    "참고자료 누락",
    "계산 오류"
  ],
  feedback: "...",               // 피드백 (선택 사항)
  gradedAt: "2026-02-01T15:00:00",  // 채점 시각
  gradedBy: "minchang"           // 채점자 계정ID
}
```
- **localStorage 키**: `grading_${userId}`

---

## 5. 권한 체계

### 5.1 권한 정의

| 권한 | 역할 | 접근 가능 화면 | 제한 사항 |
|------|------|----------------|-----------|
| candidate | 후보자 | 로그인, 문제 목록, 문제 풀이, 제출 완료 | - Admin 대시보드 접근 불가<br>- 정답/채점기준 절대 노출 금지<br>- API 키 노출 금지 |
| admin | 관리자 | 로그인, Admin 대시보드 | - 후보자 문제 풀이 화면 접근 불가<br>- Admin 대시보드만 접근 가능 |

### 5.2 화면별 접근 제어

| 화면 | candidate | admin |
|------|-----------|-------|
| 로그인 화면 | O | O |
| 문제 목록 | O | X |
| 문제 풀이 화면 | O (제출 전) | X |
| 참고자료 모달 | O (제출 전) | X |
| 제출 완료 화면 | O (제출 후) | X |
| Admin 대시보드 | X | O |

### 5.3 데이터 접근 제어
- **후보자**: 자신의 답안 데이터만 읽기/쓰기 가능
- **관리자**: 모든 후보자의 답안 및 채점 결과 읽기/쓰기 가능
- **정답/채점기준**: 관리자만 접근 가능, 후보자 화면 JavaScript 코드에서 완전히 제거

---

## 6. 비기능 요구사항

### 6.1 성능 요구사항
- **페이지 로딩 시간**: 초기 로딩 3초 이내
- **localStorage 읽기/쓰기**: 100ms 이내
- **API 응답 시간**: AI 채점 요청 시 15초 이내 (타임아웃 20초)

### 6.2 보안 요구사항
- **정답 보호**: 후보자 화면 JavaScript 코드에 정답/채점기준 하드코딩 절대 금지
- **API 키 보호**: OpenRouter API 키는 관리자 화면에서만 사용, 후보자 화면 코드에서 완전히 제거
- **제출 잠금**: localStorage 기반 잠금 메커니즘 (클라이언트 검증, 서버 검증 불가 인지)
- **XSS 방지**: 사용자 입력 렌더링 시 HTML 이스케이프 처리

### 6.3 확장성 요구사항
- **문제 추가**: 문제 데이터 구조에 새로운 문제 추가 시 코드 수정 최소화
- **참고자료 확장**: 참고자료 유형 (PDF, 이미지 등) 추가 가능하도록 설계

### 6.4 접근성 요구사항
- **키보드 내비게이션**: Tab 키로 모든 인터랙티브 요소 접근 가능
- **화면 낭독기 지원**: ARIA 레이블 적용
- **색상 대비**: WCAG 2.1 AA 수준 준수

---

## 7. 개발 일정

### 7.1 마일스톤 및 주요 일정

| 마일스톤 | 기간 | 주요 산출물 | 담당자 |
|---------|------|-------------|--------|
| M1: 요구사항 정의 | 1일 | PRD 문서 | PM |
| M2: 데이터 구조 설계 | 1일 | 데이터 모델 정의서, localStorage 스키마 | Backend Dev |
| M3: UI/UX 설계 | 2일 | 와이어프레임, 디자인 시안 | Frontend Dev |
| M4: 후보자 화면 개발 | 3일 | 로그인, 문제 목록, 문제 풀이, 제출 기능 | Frontend Dev |
| M5: 관리자 화면 개발 | 2일 | Admin 대시보드, 채점 기능 | Frontend Dev |
| M6: AI 채점 연동 | 1일 | OpenRouter API 통합 | AI Integration |
| M7: 테스트 및 QA | 2일 | 테스트 케이스 작성, 버그 수정 | QA Engineer |
| M8: 최종 배포 | 1일 | index_pdf.html 최종 빌드 | DevOps |

**총 예상 기간**: 13일 (2주 1일)

### 7.2 단계별 산출물

#### Phase 1: 설계 (2일)
- PRD 문서
- 데이터 모델 정의서
- localStorage 스키마 문서
- 와이어프레임 (Figma 또는 Sketch)

#### Phase 2: 후보자 화면 개발 (3일)
- 로그인 화면 (1일)
- 문제 목록 + 문제 풀이 화면 (1일)
- 참고자료 모달 + 임시 저장 (0.5일)
- 제출 잠금 메커니즘 (0.5일)

#### Phase 3: 관리자 화면 개발 (2일)
- Admin 대시보드 레이아웃 (0.5일)
- 후보자 목록 + 상세 화면 (1일)
- 수동 채점 인터페이스 (0.5일)

#### Phase 4: AI 채점 연동 (1일)
- OpenRouter API 통합
- 채점 결과 파싱 및 저장

#### Phase 5: QA 및 배포 (3일)
- 기능 테스트 (1일)
- 보안 테스트 (제출 잠금, 정답 노출 방지) (1일)
- 최종 빌드 및 배포 (1일)

### 7.3 리소스 계획

| 역할 | 인원 | 투입 기간 | 주요 업무 |
|------|------|-----------|-----------|
| 제품 기획자 (PM) | 1명 | 1일 | PRD 작성, 요구사항 정의 |
| Frontend Developer | 1명 | 7일 | UI/UX 개발, localStorage 연동 |
| Backend Developer | 1명 | 1일 | 데이터 모델 설계 (서버 없음) |
| AI Integration Specialist | 1명 | 1일 | OpenRouter API 연동 |
| QA Engineer | 1명 | 2일 | 테스트 케이스 작성 및 실행 |

### 7.4 리스크 및 대응 방안

| 리스크 | 발생 가능성 | 영향도 | 대응 방안 |
|--------|------------|--------|-----------|
| localStorage 용량 제한 (5MB) | 중 | 높음 | Excel 파일 Base64 인코딩 시 압축 적용 |
| OpenRouter API 호출 실패 | 중 | 중 | 수동 채점 대체 기능 제공 |
| 제출 잠금 우회 (개발자도구) | 높음 | 중 | 클라이언트 검증의 한계 인정, 감독관 모니터링 병행 권장 |
| 브라우저 호환성 문제 | 낮음 | 중 | Chrome, Edge 최신 버전 권장 안내 |
| 참고자료 렌더링 오류 (xlsx) | 중 | 중 | SheetJS 라이브러리 안정성 검증, 대체 뷰어 준비 |

---

## 8. 부록

### 8.1 기술 스택 권장사항

- **Frontend**: HTML5, CSS3 (또는 Tailwind CSS), Vanilla JavaScript (ES6+)
- **데이터 저장**: localStorage API
- **Excel 처리**: SheetJS (xlsx.js) 라이브러리
- **AI 채점**: OpenRouter API (tngtech/deepseek-r1t2-chimera:free)
- **빌드**: 단일 파일 번들링 (Webpack 또는 Rollup)

### 8.2 화면 흐름도 (Screen Flow)

```
[로그인]
   ├─ (candidate) → [문제 목록]
   │                   ├─ [문제 1 풀이] → [제출 완료]
   │                   └─ [문제 2 풀이] → [제출 완료]
   └─ (admin) → [Admin 대시보드]
                   ├─ [후보자 A 상세] → [AI 채점]
                   └─ [후보자 B 상세] → [수동 채점]
```

### 8.3 용어 정의

| 용어 | 정의 |
|------|------|
| TBS | Test-Based Selection, 테스트 기반 선발 |
| 제출 잠금 (Submission Lock) | 제출 완료 후 문제/답안/참고자료 재접근 차단 메커니즘 |
| localStorage | 브라우저 로컬 저장소 (최대 5MB) |
| DoD (Definition of Done) | 완료 조건, 기능 구현 완료 판단 기준 |
| 수용 기준 (Acceptance Criteria) | 기능이 요구사항을 충족했는지 판단하는 테스트 가능한 조건 |
| OpenRouter API | LLM 모델 API 게이트웨이 서비스 |

### 8.4 참고 파일 경로

- 계정정보: `C:\Users\hipho\OneDrive\바탕 화면\바이브코딩\인턴 과제문제\계정정보.xlsx`
- 문제 1번 데이터: `C:\Users\hipho\OneDrive\바탕 화면\바이브코딩\인턴 과제문제\문제 1번\*`
- 문제 2번 데이터: `C:\Users\hipho\OneDrive\바탕 화면\바이브코딩\인턴 과제문제\문제 2번\*`

---

## 문서 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|-----------|
| 1.0 | 2026-02-01 | Product Manager | 최초 작성 |

---

**문서 승인**
- 작성자: Product Manager
- 검토자: Frontend Developer, Backend Developer
- 최종 승인자: Project Lead
